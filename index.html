<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Item List</title>
  <script type="text/javascript" src="assets/js/lib/jquery-3.2.1.min.js">
  </script>
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="assets/css/todo.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
</head>

<body>
  <!-- <div id="leftPanel">
    <ul>

    </ul>
  </div> -->
  <div id="container">
    <h1 id="top"><div class="fa fa-bars dropdown">
      <div class="dropdown-content">
        <ul id="categories">
          <input id="title" type="text" placeholder="Enter Room Here....">
          <!-- <li>John</li>
          <li>Saif</li>
          <li>Luvneesh</li> -->
        </ul>

      </div>
    </div>
     <span id="header">Instructions</span> <i class="fa fa-plus"></i>



     </h1>
    <input id="add" type="text" placeholder="Add New Item">
    <ul id="list"></ul>

    <h1 id="bottom"> &nbsp;</h1>

  </div>

  <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyADayB4YtXg3xRbJN0AJCWFW6JeXvkYiOg",
      authDomain: "mini-lista.firebaseapp.com",
      databaseURL: "https://mini-lista.firebaseio.com",
      projectId: "mini-lista",
      storageBucket: "mini-lista.appspot.com",
      messagingSenderId: "717006730216"
    };

    firebase.initializeApp(config);

    var listTitle = "Instructions"
    var database = firebase.database();
    var mainRef = firebase.database().ref(listTitle);
    var loaded = false;

    mainRef.once('value').then(function(snapshot) {
      var itemList = snapshot.val()
      console.log(itemList)
      if (itemList) { //If there is a item
        if(loaded){
        } else {
          for (var itemKey in itemList){
            const item = itemList[itemKey]["Title"];
            $("ul#list").append("<li><span class='item'  id='" + itemKey + "'><i class='fa fa-trash'></i></span> " + item + "</li>");
          }
          loaded = true;
        }

      } else {
        loaded = true;
        //$("ul#list").append("<li><span class="item" ><i class='fa fa-trash'></i></span> " + "Add Items Above!" + "</li>");
      }
    });

    mainRef.on('child_added', function(snapshot) {
      var itemList = snapshot.val()
        if(loaded){
          var item = itemList["Title"];
          $("ul#list").append("<li><span class='item'  id='" + snapshot.key + "'><i class='fa fa-trash'></i></span> " + item + "</li>");
          }

    });

    // This function is not really needed
    // mainRef.on('child_removed', function(snapshot) {
    //   console.log("Something was removed")
    //   // var Item = snapshot.val()
    //   //need to restructure list
    //
    // });
  </script>
  <script type="text/javascript" src="assets/js/todo.js"></script>
</body>

</html>
